<div class="container">
  <div class="card-flat p-2">
    <%= cl_image_tag @flat.photo.key %>
    <div class="card-flat-infos">
      <div>
        <h3><%= @flat.title %></h3>
        <h2><%= @flat.city %></h2>
        <p><%= @flat.description %></p>
        <p>Bedrooms: <%= @flat.bedrooms %></p>
        <p>Number of guests: <%= @flat.number_of_guests %></p>
        <p><%= @flat.user.first_name %></p>
        <p><%= "⭐️" * @flat.rating %></p>
      </div>
      <h2 class="card-flat-pricing">€ <%= @flat.price_per_night %> night</h2>
      <% if @flat.user.avatar.attached? %>
        <%= cl_image_tag @flat.user.avatar.key, class: "card-flat-user avatar-bordered" %>
      <% else %>
        <%= image_tag "user.png", class: "card-flat-user avatar-bordered" %>
      <% end %>
    </div>
    <div class="row">
      <div class="col col-sm-6 col-md-8">
        <%= link_to "Book", new_flat_booking_path(@flat), class: "btn btn-flat", style: "width: 100%" %>
      </div>
      <div class="col col-3 col-md-2">
        <%= link_to "Edit", edit_flat_path(@flat), class: "btn btn-ghost" %>
      </div>
      <div class="col col-3 col-md-2">
        <%= link_to "Delete", flat_path(@flat), class: "btn btn-ghost" , data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}%>
      </div>
    </div>
  </div>
  <br>
  <br>
  <hr>
  <h2>Bookings</h2>
  <% @flat.bookings.each do |booking| %>
  <div class="card-guest m-4">
    <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80" />
    <div class="card-guest-infos">
      <h2><%= booking.guest_name %></h2>
      <p>From <%= booking.start_date %> to <%= booking.end_date %></p>
      <p>Number of guests: <%= booking.number_of_guests %></p>
      <p>Details: <%= booking.details %></p>
      <%# <%= simple_form_for [@flat, @booking] do |f| %>
      <%# <%= f.input :approve %>
      <%# <%= f.submit "Approve booking", class: "btn btn-primary" %>
    </div>
  </div>
<% end %>
</div>
